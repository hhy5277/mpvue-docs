<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="http://mpvue.com/mpvue/">
        <link rel="shortcut icon" href="../assets/favicon.ico">
        

	<title>Home - mpvue-docs</title>

        <!-- <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet"> -->
        <link href="../css/page.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <link href="../assets/style.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
    </head>

    <body>

        

<div id="header">
    <a id="logo" href="..">
        <!-- <img src="../img/logo.png"> -->
        <span>mpvue-docs</span>
    </a>
    <ul id="nav">
        <li>
          <form id="search-form" role="form">
            <input type="text" placeholder="Search..." id="mkdocs-search-query-input" class="st-default-search-input" autocomplete="off" autocorrect="off" autocapitalize="off">
          </form>
        </li>

    
        
            
            <li><a href=".." class="nav-link ">Home</a></li>
            
        
    
        
        <li class="nav-dropdown-container">
          <a class="nav-link" href="./">Mpvue</a><span class="arrow"></span>
          <ul class="nav-dropdown">
            
                
    
    <li><a href="./" class="nav-link">Home</a></li>
    

            
                
    
    <li><a href="mpvue-template-compiler/" class="nav-link">Mpvue template compiler</a></li>
    

            
                
    
    <li><a href="quickstart/" class="nav-link">Quickstart</a></li>
    

            
                
    
    <li><a href="simple/" class="nav-link">Simple</a></li>
    

            
          </ul>
        </li>
        
    
        
        <li class="nav-dropdown-container">
          <a class="nav-link" href="../build/">Build</a><span class="arrow"></span>
          <ul class="nav-dropdown">
            
                
    
    <li><a href="../build/" class="nav-link">Home</a></li>
    

            
                
    
    <li><a href="../build/mpvue-loader/" class="nav-link">Mpvue loader</a></li>
    

            
                
    
    <li><a href="../build/mpvue-webpack-target/" class="nav-link">Mpvue webpack target</a></li>
    

            
                
    
    <li><a href="../build/postcss-mpvue-wxss/" class="nav-link">Postcss mpvue wxss</a></li>
    

            
                
    
    <li><a href="../build/px2rpx-loader/" class="nav-link">Px2rpx loader</a></li>
    

            
                
    
    <li><a href="../build/mpvue-lint/" class="nav-link">Mpvue lint</a></li>
    

            
                
    
    <li><a href="../build/webpack-mpvue-asset-plugin/" class="nav-link">Webpack mpvue asset plugin</a></li>
    

            
          </ul>
        </li>
        
    
        
            
            <li><a href="../qa/" class="nav-link ">Q&A</a></li>
            
        
    
        
            
            <li><a href="../change-log/" class="nav-link ">Change log</a></li>
            
        
    
        
            
            <li><a href="../change-log/2018.7.24/" class="nav-link "></a></li>
            
        
    

    </ul>
    <span class="github"><a href="https://github.com/Meituan-Dianping/mpvue"> <img src="../img/github.svg"/></a></span>
</div>

        
            <div id="main" class="">
                
                    <div class="sidebar bs-sidebar">
  <div class="list">
    <ul class="nav menu-root">
    
        <li class="active">
            <a href="#_1" class="sidebar-link">使用手册</a>
        </li>
        <ul class="menu-sub">
        
            <li>
                <a href="#_2" class="sidebar-link">五分钟教程</a>
                <ul class="menu-sub">
                
                </ul>
            </li>
        
            <li>
                <a href="#_3" class="sidebar-link">框架原理</a>
                <ul class="menu-sub">
                
                </ul>
            </li>
        
            <li>
                <a href="#vue" class="sidebar-link">Vue 实例</a>
                <ul class="menu-sub">
                
                  <li><a class="section-link" href="#_4">实例生命周期</a></li>
                
                  <li><a class="section-link" href="#_5">生命周期图示</a></li>
                
                </ul>
            </li>
        
            <li>
                <a href="#_6" class="sidebar-link">模板语法</a>
                <ul class="menu-sub">
                
                  <li><a class="section-link" href="#-html">不支持 纯-HTML</a></li>
                
                  <li><a class="section-link" href="#javascript">不支持部分复杂的 JavaScript 渲染表达式</a></li>
                
                  <li><a class="section-link" href="#_7">不支持过滤器</a></li>
                
                </ul>
            </li>
        
            <li>
                <a href="#_8" class="sidebar-link">计算属性</a>
                <ul class="menu-sub">
                
                </ul>
            </li>
        
            <li>
                <a href="#_9" class="sidebar-link">不支持函数</a>
                <ul class="menu-sub">
                
                </ul>
            </li>
        
            <li>
                <a href="#class-style" class="sidebar-link">Class 与 Style 绑定</a>
                <ul class="menu-sub">
                
                  <li><a class="section-link" href="#_10">用在组件上</a></li>
                
                </ul>
            </li>
        
            <li>
                <a href="#_11" class="sidebar-link">条件渲染</a>
                <ul class="menu-sub">
                
                </ul>
            </li>
        
            <li>
                <a href="#_12" class="sidebar-link">列表渲染</a>
                <ul class="menu-sub">
                
                </ul>
            </li>
        
            <li>
                <a href="#_13" class="sidebar-link">事件处理器</a>
                <ul class="menu-sub">
                
                </ul>
            </li>
        
            <li>
                <a href="#_14" class="sidebar-link">表单控件绑定</a>
                <ul class="menu-sub">
                
                </ul>
            </li>
        
            <li>
                <a href="#_15" class="sidebar-link">组件</a>
                <ul class="menu-sub">
                
                  <li><a class="section-link" href="#vue_1">Vue 组件</a></li>
                
                  <li><a class="section-link" href="#_16">小程序组件</a></li>
                
                </ul>
            </li>
        
            <li>
                <a href="#typescript" class="sidebar-link">TypeScript支持</a>
                <ul class="menu-sub">
                
                </ul>
            </li>
        
            <li>
                <a href="#_17" class="sidebar-link">最佳实践</a>
                <ul class="menu-sub">
                
                </ul>
            </li>
        
            <li>
                <a href="#_18" class="sidebar-link">常见问题</a>
                <ul class="menu-sub">
                
                </ul>
            </li>
        
            <li>
                <a href="#mpvue" class="sidebar-link">mpvue 框架使用场景汇总</a>
                <ul class="menu-sub">
                
                  <li><a class="section-link" href="#_19">开发者可能会面对的四种典型场景</a></li>
                
                </ul>
            </li>
        
        </ul>
    
    </ul>
  </div>
</div>
                    
<div class="content guide with-sidebar">

<script crossorigin="anonymous" src="//www.dpfile.com/app/owl/static/owl_1.5.28.js"></script>

<script>
Owl.start({
    project: 'mpvue-doc',
    pageUrl: 'mpvue/index'
})
</script>

<h1 id="_1">使用手册</h1>
<p><code>mpvue</code> 继承自 <code>Vue.js</code>，其技术规范和语法特点与 <code>Vue.js</code> 保持一致。</p>
<p>本文档适用于有一定 <code>Vue.js</code> 使用经验的开发者。我们默认你已经掌握 <code>Vue.js</code> 技术体系，<strong>如果你是新手</strong>，你可能需要先熟悉 <a href="https://cn.vuejs.org/guide/">Vue.js 官方文档</a>。</p>
<h2 id="_2">五分钟教程</h2>
<p>通过 <code>Vue.js</code> 命令行工具 <a href="https://github.com/vuejs/vue-cli">vue-cli</a>，你只需在终端窗口输入几条简单命令，即可快速创建和启动一个带热重载、保存时静态检查、内置代码构建功能的小程序项目：</p>
<pre><code class="bash"># 全局安装 vue-cli
$ npm install --global vue-cli

# 创建一个基于 mpvue-quickstart 模板的新项目
$ vue init mpvue/mpvue-quickstart my-project

# 安装依赖
$ cd my-project
$ npm install
# 启动构建
$ npm run dev
</code></pre>

<p>接下来，你只需要启动<a href="https://mp.weixin.qq.com/debug/wxadoc/dev/quickstart/basic/getting-started.html#%E5%AE%89%E8%A3%85%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7">微信开发者工具</a>，引入项目即可预览到你的第一个 <code>mpvue</code> 小程序。</p>
<h2 id="_3">框架原理</h2>
<ul>
<li><code>mpvue</code> 保留了 vue.runtime 核心方法，无缝继承了 <code>Vue.js</code> 的基础能力</li>
<li><code>mpvue-template-compiler</code> 提供了将 vue 的模板语法转换到小程序的 wxml 语法的能力</li>
<li>修改了 vue 的建构配置，使之构建出符合小程序项目结构的代码格式： json/wxml/wxss/js 文件</li>
</ul>
<h2 id="vue">Vue 实例</h2>
<p>支持 <a href="https://cn.vuejs.org/v2/guide/instance.html">官方文档：Vue 实例</a>，同时我们做了一些修改，来适应小程序的独特加载逻辑。</p>
<h3 id="_4">实例生命周期</h3>
<p>同 vue，不同的是我们会在小程序 onReady 后，再去触发 vue mounted 生命周期，详细的 vue 生命周期文档请看<a href="https://cn.vuejs.org/v2/api/#选项-生命周期钩子">生命周期钩子</a></p>
<ul>
<li>beforeCreate</li>
<li>created</li>
<li>beforeMount</li>
<li>mounted</li>
<li>beforeUpdate</li>
<li>updated</li>
<li>activated</li>
<li>deactivated</li>
<li>beforeDestroy</li>
<li>destroyed</li>
</ul>
<p>除了 Vue 本身的生命周期外，mpvue 还兼容了小程序生命周期，这部分生命周期钩子的来源于<a href="https://mp.weixin.qq.com/debug/wxadoc/dev/framework/app-service/page.html">微信小程序的 Page</a>， 除特殊情况外，不建议使用小程序的生命周期钩子。</p>
<p><strong>app 部分：</strong></p>
<ul>
<li>onLaunch，初始化</li>
<li>onShow，当小程序启动，或从后台进入前台显示</li>
<li>onHide，当小程序从前台进入后台</li>
</ul>
<p><strong>page 部分：</strong></p>
<ul>
<li>onLoad，监听页面加载</li>
<li>onShow，监听页面显示</li>
<li>onReady，监听页面初次渲染完成</li>
<li>onHide，监听页面隐藏</li>
<li>onUnload，监听页面卸载</li>
<li>onPullDownRefresh，监听用户下拉动作</li>
<li>onReachBottom，页面上拉触底事件的处理函数</li>
<li>onShareAppMessage，用户点击右上角分享</li>
<li>onPageScroll，页面滚动</li>
<li>onTabItemTap, 当前是 tab 页时，点击 tab 时触发 （mpvue 0.0.16 支持）</li>
</ul>
<p>用法示例：</p>
<pre><code class="javascript">new Vue({
  data: {
    a: 1
  },
  created () {
    // `this` 指向 vm 实例
    console.log('a is: ' + this.a)
  },
  onShow () {
    // `this` 指向 vm 实例
    console.log('a is: ' + this.a, '小程序触发的 onshow')
  }
})
// =&gt; &quot;a is: 1&quot;
</code></pre>

<p><strong>注意点：</strong></p>
<ol>
<li>
<p>不要在选项属性或回调上使用箭头函数，比如 <code>created: () =&gt; console.log(this.a)</code> 或 <code>vm.$watch('a', newValue =&gt; this.myMethod())</code>。因为箭头函数是和父级上下文绑定在一起的，<code>this</code> 不会是如你做预期的 Vue 实例，且 <code>this.a</code> 或 <code>this.myMethod</code> 也会是未定义的。</p>
</li>
<li>
<p>微信小程序的页面的 <code>query</code> 参数是通过 <code>onLoad</code> 获取的，mpvue 对此进行了优化，直接通过 <code>this.$root.$mp.query</code> 获取相应的参数数据，其调用需要在 <code>onLoad</code> 生命周期触发之后使用，比如 <code>onShow</code> 等，具体生命周期调用顺序，见下图。</p>
</li>
</ol>
<h3 id="_5">生命周期图示</h3>
<blockquote>
<p>你不需要立马弄明白所有的东西，不过随着你的不断学习和使用，它的参考价值会越来越高。</p>
</blockquote>
<p>生命周期的调用关系和顺序图。</p>
<p><img alt="" src="./../assets/lifecycle.jpg" /></p>
<h2 id="_6">模板语法</h2>
<p>几乎全支持 <a href="https://cn.vuejs.org/v2/guide/syntax.html">官方文档：模板语法</a>，下面讲下不支持的情况。</p>
<h3 id="-html">不支持 <code>纯-HTML</code></h3>
<p>小程序里所有的 BOM／DOM 都不能用，也就是说 <code>v-html</code> 指令不能用。</p>
<h3 id="javascript">不支持部分复杂的 JavaScript 渲染表达式</h3>
<p>我们会把 template 中的 <code>{{}}</code> 双花括号的部分，直接编码到 wxml 文件中，由于微信小程序的能力限制(<a href="https://mp.weixin.qq.com/debug/wxadoc/dev/framework/view/wxml/data.html">数据绑定</a>)，所以无法支持复杂的 JavaScript 表达式。</p>
<p>目前可以使用的有 <code>+ - * % ?: ! == === &gt; &lt; [] .</code>，剩下的还待完善。</p>
<pre><code class="html">&lt;!-- 这种就不支持，建议写 computed --&gt;
&lt;p&gt;{{ message.split('').reverse().join('') }}&lt;/p&gt;

&lt;!-- 但写在 @event 里面的表达式是都支持的，因为这部分的计算放在了 vdom 里面 --&gt;
&lt;ul&gt;
    &lt;li v-for=&quot;item in list&quot;&gt;
        &lt;div @click=&quot;clickHandle(item, index, $event)&quot;&gt;{{ item.value }}&lt;/p&gt;
    &lt;/li&gt;
&lt;/ul&gt;
</code></pre>

<h3 id="_7">不支持过滤器</h3>
<p>渲染部分会转成 wxml ，wxml 不支持过滤器，所以这部分功能不支持。</p>
<h2 id="_8">计算属性</h2>
<p>支持 <a href="https://cn.vuejs.org/v2/guide/computed.html">官方文档：计算属性</a>。</p>
<h2 id="_9">不支持函数</h2>
<p>不支持在 template 内使用 methods 中的函数。</p>
<h2 id="class-style">Class 与 Style 绑定</h2>
<p>为节约性能，我们将 Class 与 Style 的表达式通过 compiler 硬编码到 wxml 中，支持语法和转换效果如下：</p>
<p>class 支持的语法:</p>
<pre><code>&lt;p :class=&quot;{ active: isActive }&quot;&gt;111&lt;/p&gt;
&lt;p class=&quot;static&quot; v-bind:class=&quot;{ active: isActive, 'text-danger': hasError }&quot;&gt;222&lt;/p&gt;
&lt;p class=&quot;static&quot; :class=&quot;[activeClass, errorClass]&quot;&gt;333&lt;/p&gt;
&lt;p class=&quot;static&quot; v-bind:class=&quot;[isActive ? activeClass : '', errorClass]&quot;&gt;444&lt;/p&gt;
&lt;p class=&quot;static&quot; v-bind:class=&quot;[{ active: isActive }, errorClass]&quot;&gt;555&lt;/p&gt;
</code></pre>

<p>将分别被转换成:</p>
<pre><code>&lt;view class=&quot;_p {{[isActive ? 'active' : '']}}&quot;&gt;111&lt;/view&gt;
&lt;view class=&quot;_p static {{[isActive ? 'active' : '', hasError ? 'text-danger' : '']}}&quot;&gt;222&lt;/view&gt;
&lt;view class=&quot;_p static {{[activeClass, errorClass]}}&quot;&gt;333&lt;/view&gt;
&lt;view class=&quot;_p static {{[isActive ? activeClass : '', errorClass]}}&quot;&gt;444&lt;/view&gt;
&lt;view class=&quot;_p static {{[[isActive ? 'active' : ''], errorClass]}}&quot;&gt;555&lt;/view&gt;
</code></pre>

<p>style 支持的语法:</p>
<pre><code>&lt;p v-bind:style=&quot;{ color: activeColor, fontSize: fontSize + 'px' }&quot;&gt;666&lt;/p&gt;
&lt;p v-bind:style=&quot;[{ color: activeColor, fontSize: fontSize + 'px' }]&quot;&gt;777&lt;/p&gt;
</code></pre>

<p>将分别被转换成:</p>
<pre><code>&lt;view class=&quot;_p&quot; style=&quot; {{'color:' + activeColor + ';' + 'font-size:' + fontSize + 'px' + ';'}}&quot;&gt;666&lt;/view&gt;
&lt;view class=&quot;_p&quot; style=&quot; {{'color:' + activeColor + ';' + 'font-size:' + fontSize + 'px' + ';'}}&quot;&gt;777&lt;/view&gt;
</code></pre>

<p>不支持 <a href="https://cn.vuejs.org/v2/guide/class-and-style.html">官方文档：Class 与 Style 绑定</a> 中的 <code>classObject</code> 和 <code>styleObject</code> 语法。</p>
<p>最佳实践见上文支持的语法，<strong>从性能考虑，建议不要过度依赖此。</strong></p>
<p>此外还可以用 computed 方法生成 class 或者 style 字符串，插入到页面中，举例说明：</p>
<pre><code class="html">&lt;template&gt;
    &lt;!-- 支持 --&gt;
    &lt;div class=&quot;container&quot; :class=&quot;computedClassStr&quot;&gt;&lt;/div&gt;
    &lt;div class=&quot;container&quot; :class=&quot;{active: isActive}&quot;&gt;&lt;/div&gt;

    &lt;!-- 不支持 --&gt;
    &lt;div class=&quot;container&quot; :class=&quot;computedClassObject&quot;&gt;&lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
    export default {
        data () {
            return {
                isActive: true
            }
        },
        computed: {
            computedClassStr () {
                return this.isActive ? 'active' : ''
            },
            computedClassObject () {
                return { active: this.isActive }
            }
        }
    }
&lt;/script&gt;
</code></pre>

<h3 id="_10">用在组件上</h3>
<p>暂不支持在组件上使用 Class 与 Style 绑定</p>
<h2 id="_11">条件渲染</h2>
<p>全支持 <a href="https://cn.vuejs.org/v2/guide/conditional.html">官方文档：条件渲染</a></p>
<h2 id="_12">列表渲染</h2>
<p>全支持 <a href="https://cn.vuejs.org/v2/guide/list.html">官方文档：列表渲染</a></p>
<p>只是需要注意一点，<strong>嵌套列表渲染，必须指定不同的索引！</strong></p>
<p>示例：</p>
<pre><code class="html">&lt;!-- 在这种嵌套循环的时候， index 和 itemIndex 这种索引是必须指定，且别名不能相同，正确的写法如下 --&gt;
&lt;template&gt;
    &lt;ul v-for=&quot;(card, index) in list&quot;&gt;
        &lt;li v-for=&quot;(item, itemIndex) in card&quot;&gt;
            {{item.value}}
        &lt;/li&gt;
    &lt;/ul&gt;
&lt;/template&gt;
</code></pre>

<h2 id="_13">事件处理器</h2>
<p>几乎全支持啦 <a href="https://cn.vuejs.org/v2/guide/events.html">官方文档：事件处理器</a></p>
<p>我们引入了 Vue.js 的虚拟 DOM ，在前文模版中绑定的事件会被挂在到 vnode 上，同时我们的 compiler 在 wxml 上绑定了小程序的事件，并做了相应的映射，所以你在真实点击的时候通过 runtime 中 <code>handleProxy</code> 通过事件类型分发到 vnode 的事件上，同 Vue 在 WEB 的机制一样，所以可以做到无损支持。同时还顺便支持了自定义事件和 <code>$emit</code> 机制。</p>
<pre><code class="javascript">// 事件映射表，左侧为 WEB 事件，右侧为 小程序 对应事件
{
    click: 'tap',
    touchstart: 'touchstart',
    touchmove: 'touchmove',
    touchcancel: 'touchcancel',
    touchend: 'touchend',
    tap: 'tap',
    longtap: 'longtap',
    input: 'input',
    change: 'change',
    submit: 'submit',
    blur: 'blur',
    focus: 'focus',
    reset: 'reset',
    confirm: 'confirm',
    columnchange: 'columnchange',
    linechange: 'linechange',
    error: 'error',
    scrolltoupper: 'scrolltoupper',
    scrolltolower: 'scrolltolower',
    scroll: 'scroll'
}
</code></pre>

<p>在 <code>input</code> 和 <code>textarea</code> 中 <code>change</code> 事件会被转为 <code>blur</code> 事件。</p>
<p><strong>踩坑注意：</strong></p>
<ul>
<li>列表中没有的原生事件也可以使用例如 bindregionchange 事件直接在 dom 上将bind改为@ <code>@regionchange</code>,同时这个事件也非常特殊，它的 event type 有 begin 和 end 两个，导致我们无法在<code>handleProxy</code> 中区分到底是什么事件，所以你在监听此类事件的时候同时监听事件名和事件类型既 <code>&lt;map @regionchange="functionName" @end="functionName" @begin="functionName"&gt;&lt;map&gt;</code></li>
<li>小程序能力所致，bind 和 catch 事件同时绑定时候，只会触发 bind ,catch 不会被触发，要避免踩坑。</li>
<li>事件修饰符<ul>
<li><code>.stop</code> 的使用会阻止冒泡，但是同时绑定了一个非冒泡事件，会导致该元素上的 catchEventName 失效！</li>
<li><code>.prevent</code> 可以直接干掉，因为小程序里没有什么默认事件，比如submit并不会跳转页面</li>
<li><code>.capture</code> 支持 <code>1.0.9</code></li>
<li><code>.self</code> 没有可以判断的标识</li>
<li><code>.once</code> 也不能做，因为小程序没有 removeEventListener, 虽然可以直接在 handleProxy 中处理，但非常的不优雅，违背了原意，暂不考虑</li>
</ul>
</li>
<li>其他 键值修饰符 等在小程序中压根没键盘，所以。。。</li>
</ul>
<h2 id="_14">表单控件绑定</h2>
<p>几乎全支持 <a href="https://cn.vuejs.org/v2/guide/forms.html">官方文档：表单控件绑定</a>，不支持的还没测出来，之所以说几乎，是因为 WEB 表单这么复杂，谁特么知道会出什么奇怪的特性。</p>
<p>建议开发过程中直接使用 <a href="https://mp.weixin.qq.com/debug/wxadoc/dev/component/button.html">微信小程序：表单组件</a> 。用法示例：</p>
<p><a href="https://github.com/Meituan-Dianping/mpvue/issues/58">select 组件用 picker 组件进行代替</a></p>
<pre><code class="html">&lt;template&gt;
  &lt;div&gt;
    &lt;picker @change=&quot;bindPickerChange&quot; :value=&quot;index&quot; :range=&quot;array&quot;&gt;
      &lt;view class=&quot;picker&quot;&gt;
        当前选择：{{array[index]}}
      &lt;/view&gt;
    &lt;/picker&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  data () {
    return {
      index: 0,
      array: ['A', 'B', 'C']
    }
  },
  methods: {
    bindPickerChange (e) {
      console.log(e)
    }
  }
}

&lt;/script&gt;
</code></pre>

<p><a href="https://github.com/Meituan-Dianping/mpvue/issues/66">表单元素 radio 用 radio-group 组件进行代替</a></p>
<pre><code class="html">&lt;template&gt;
  &lt;div&gt;
    &lt;radio-group class=&quot;radio-group&quot; @change=&quot;radioChange&quot;&gt;
      &lt;label class=&quot;radio&quot; v-for=&quot;(item, index) in items&quot; :key=&quot;item.name&quot;&gt;
        &lt;radio :value=&quot;item.name&quot; :checked=&quot;item.checked&quot;/&gt; {{item.value}}
      &lt;/label&gt;
    &lt;/radio-group&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  data () {
    return {
      items: [
        {name: 'USA', value: '美国'},
        {name: 'CHN', value: '中国', checked: 'true'},
        {name: 'BRA', value: '巴西'},
        {name: 'JPN', value: '日本'},
        {name: 'ENG', value: '英国'},
        {name: 'TUR', value: '法国'}
      ]
    }
  },
  methods: {
    radioChange (e) {
      console.log('radio发生change事件，携带value值为：', e.target.value)
    }
  }
}

&lt;/script&gt;

</code></pre>

<h2 id="_15">组件</h2>
<h3 id="vue_1">Vue 组件</h3>
<p>组件是整个 Vue.js 中最复杂的部分，当然要支持 <a href="https://cn.vuejs.org/v2/guide/components.html">官方文档：组件</a> 。</p>
<p><strong>有且只能使用单文件组件（.vue 组件）的形式进行支持。</strong>其他的诸如：动态组件，自定义 render，和<code>&lt;script type="text/x-template"&gt;</code> 字符串模版等都不支持。原因很简单，因为我们要预编译出 wxml。</p>
<p>如果未来小程序支持了动态增删改查 wxml 节点信息，那我们就能做到全支持。</p>
<p>详细的不支持列表：</p>
<ul>
<li>暂不支持在组件引用时，在组件上定义 click 等原生事件、v-show（可用 v-if 代替）和 class style 等样式属性(例：<code>&lt;card class="class-name"&gt; &lt;/card&gt;</code> 样式是不会生效的)，因为编译到 wxml，小程序不会生成节点，建议写在内部顶级元素上。</li>
<li>Slot（scoped 暂时还没做支持）</li>
<li>动态组件</li>
<li>异步组件</li>
<li>inline-template</li>
<li>X-Templates</li>
<li>keep-alive</li>
<li>transition</li>
<li>class</li>
<li>style</li>
</ul>
<h3 id="_16">小程序组件</h3>
<p>mpvue 可以支持小程序的原生组件，比如： <code>picker,map</code> 等，需要注意的是原生组件上的事件绑定，需要以 <code>vue</code> 的事件绑定语法来绑定，如 <code>bindchange="eventName"</code> 事件，需要写成 <code>@change="eventName"</code></p>
<p>示例代码：</p>
<pre><code class="xml">&lt;picker mode=&quot;date&quot; :value=&quot;date&quot; start=&quot;2015-09-01&quot; end=&quot;2017-09-01&quot; @change=&quot;bindDateChange&quot;&gt;
    &lt;view class=&quot;picker&quot;&gt;
      当前选择: {{date}}
    &lt;/view&gt;
&lt;/picker&gt;
</code></pre>

<h2 id="typescript">TypeScript支持</h2>
<p>目前<code>mpvue-loader</code>是可以支持TypeScript选项的，配置方法<a href="../build/mpvue-loader/#typescript">在此</a>。具体Demo可以见<a href="https://github.com/WingGao/mpvue-ts-demo">mpvue-ts-demo</a></p>
<h2 id="_17">最佳实践</h2>
<p><strong>1. 精简 data 数据</strong></p>
<p>冗余数据不要挂在 data 里，所有在 data/props/computed 中的数据，每次变更都会从微信小程序的 JSCore 进程，通过 setData 序列化成字符串后发送到 JSRender 进程。所以，如果你的数据量巨大的时候，会导致页面非常卡顿。</p>
<p><strong>2. 优化长列表性能</strong></p>
<p>一般情况下这种页面会有大量的数据，除了遵从上面的建议外还有额外的建议。</p>
<ul>
<li>避免在 v-for 中嵌套子组件，这样可以优化大部分部分 setData 时的冗余数据。</li>
<li>通过实践发现 wx:if 和 hidden 的优化肉眼不可见，所以或许可以试试直接通过样式 display 来展示和隐藏。</li>
<li>如果列表过长，强烈建议产品思考更好的展示形态。比如只展示热门，多余的折叠等形式。</li>
</ul>
<blockquote>
<p>注：我们对其进行了专门优化，最佳实践时和原生小程序代码的性能相差无几。</p>
</blockquote>
<p><strong>3. 合理使用双向绑定</strong>
<code>mpvue</code> 建议使用 <code>v-model.lazy</code> 绑定方式以优化性能，此外 <code>v-model</code> 在老基础库下输入框输入时可能存在光标重设的问题。</p>
<p><strong>4. 谨慎选择直接使用小程序的 API</strong>
如果你有小程序和H5复用代码的需要，业务代码需要保持对 WEB <code>Vue.js</code> 的兼容性。此时我们不建议在代码中直接调用小程序API，更好的选择是通过桥接适配层屏蔽两端差异。</p>
<h2 id="_18">常见问题</h2>
<p><strong>1. 如何获取小程序在 page onLoad 时候传递的 options</strong></p>
<p>在所有 页面 的组件内可以通过 <code>this.$root.$mp.query</code> 进行获取。</p>
<p><strong>2. 如何获取小程序在 app onLaunch/onShow 时候传递的 options</strong></p>
<p>在所有的组件内可以通过 <code>this.$root.$mp.appOptions</code> 进行获取。</p>
<p><strong>3. 如何捕获 app 的 onError</strong></p>
<p>由于 onError 并不是完整意义的生命周期，所以只提供一个捕获错误的方法，在 app 的根组件上添加名为 onError 的回调函数即可。如下：</p>
<pre><code class="javascript">export default {
   // 只有 app 才会有 onLaunch 的生命周期
   onLaunch () {
       // ...
   },

   // 捕获 app error
   onError (err) {
       console.log(err)
   }
}

</code></pre>

<h2 id="mpvue">mpvue 框架使用场景汇总</h2>
<p><code>mpvue</code> 作为一个前端开发框架，提供了一整套解决方案。但开发者面临的实际情况可能更加复杂，我们整理了 <code>mpvue</code> 可能的使用场景，在这些场景下，我们为你提供了一些建议。</p>
<p>首先，<code>mpvue</code> 小程序框架包含如下内容：</p>
<ul>
<li>运行时JS SDK</li>
<li>初始化模板项目（包含推荐的目录结构，webpack构建，代码检查配置等）</li>
<li>项目构建所需的 npm 依赖（已经包含在项目模板中，无需手动引入）</li>
</ul>
<h3 id="_19">开发者可能会面对的四种典型场景</h3>
<ul>
<li>单独以 <code>mpvue</code> 框架构建小程序</li>
<li><code>mpvue</code> 框架为主，同时使用其它框架（原生开发方式或wepy等）</li>
<li>已经使用其它框架，引入 <code>mpvue</code> 做部分模块的开发</li>
<li>只使用 <code>mpvue</code> 的 JS SDK，自定义构建策略</li>
</ul>
<p>针对上述不同场景，<code>mpvue</code> 框架需要提供的方案和建议如下</p>
<ul>
<li>单独以 <code>mpvue</code> 框架构建小程序<ul>
<li><strong>推荐的方式，无需额外支持</strong>。通过框架提供的项目初始化工具初始化项目即可，已经包含完整的构建策略，代码组织方式等.</li>
</ul>
</li>
<li><code>mpvue</code> 框架为主，同时使用其它框架（原生开发方式或wepy等）<ul>
<li><strong>第三方框架和 <code>mpvue</code> 做分块构建</strong>。可能的方案是：不同框架各自的构建策略做好边界分离，最终通过单一入口聚合到一起。或者更简单的，拆成多个子项目，最终输出到同一目录，目标代码符合小程序规范即可。</li>
</ul>
</li>
<li>已经使用其它框架，引入 <code>mpvue</code> 做部分模块的开发<ul>
<li><strong><code>mpvue</code> 提供轻量的模块构建工具支持部分构建</strong>。对已有小程序项目接入 <code>mpvue</code> 来说，渐进的方式会是乐于接受的，可以先让一部分功能通过 <code>mpvue</code> 编写。此类场景，不再适合通过模板项目初始化项目结构，开发者可以参考模板项目中的代码编写方式，通过我们单独准备的构建工具，定制好构建任务即可。</li>
</ul>
</li>
<li>只使用 <code>mpvue</code> 的 JS SDK，自定义构建策略<ul>
<li><strong>需要开发者自定义 webpack 构建策略</strong>。 框架本身不建议开发者这么使用。但对于高阶的开发者，这是可能的方案。此时，开发者可以参考我们模板项目中的构建策略即可，我们目前只提供 webpack 构建方案。对于其它构建，我们暂不支持。</li>
</ul>
</li>
</ul>


<div class="guide-links">
    
  <span>← <a href="..">Home</a></span>
    
  
  <span style="float:right"><a href="mpvue-template-compiler/">Mpvue template compiler</a> →</span>
  
</div>


</div>
                
            </div>
        

        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script>
        <script>var base_url = '..';</script>
        <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
        <script src="../js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true" style="display:none;">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form" onsubmit="return false">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>


